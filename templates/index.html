<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>DEV SPARk - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬</title>
<style>
body {
    font-family: "Segoe UI", Tahoma, Arial;
    background: #f4f6f9;
    max-width: 1000px;
    margin: auto;
    padding: 20px;
}
h1 {
    text-align: center;
    color: #2c3e50;
}
form {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    justify-content: center;
}
input[type=file], input[type=text] {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
}
button {
    background: #3498db;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
}
button:hover { background: #2980b9; }
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
th, td {
    padding: 12px;
    text-align: center;
    border-bottom: 1px solid #ddd;
}
th { background: #3498db; color: white; }
.delete { color: red; background: none; border: none; cursor: pointer; }
.flash {
    background: #dff0d8;
    border: 1px solid #d0e9c6;
    padding: 10px;
    border-radius: 6px;
    margin-bottom: 10px;
    text-align: center;
}
</style>

<script>
function askPassword(form) {
    const pass = prompt("ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø°Ù:");
    if (!pass) return false;
    form.password.value = pass;
    return true;
}
</script>
</head>

<body>
<h1>ğŸ“¦ DEV SPARk - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬</h1>

{% with messages = get_flashed_messages() %}
{% if messages %}
  {% for msg in messages %}
    <div class="flash">{{ msg }}</div>
  {% endfor %}
{% endif %}
{% endwith %}

<form method="POST" enctype="multipart/form-data">
    <input type="text" name="program_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬" required>
    <input type="file" name="file" accept=".exe,.setup,.msi,.zip,.rar" required>
    <button type="submit">â¬†ï¸ Ø±ÙØ¹ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬/Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø¶ØºÙˆØ·</button>
</form>

{% for program, files in programs.items() %}
<h3>ğŸ“‚ {{ program }}</h3>
<table>
<tr>
    <th>Ø§Ù„Ù…Ù„Ù</th>
    <th>ØªØ­Ù…ÙŠÙ„</th>
    <th>Ø­Ø°Ù</th>
</tr>
{% for file in files %}
<tr>
    <td>{{ file.split('_',1)[1] }}</td>
    <td><a href="{{ url_for('download_file', program=program, filename=file) }}">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„</a></td>
    <td>
        <form method="POST" action="{{ url_for('delete_file', program=program, filename=file) }}" onsubmit="return askPassword(this);">
            <input type="hidden" name="password">
            <button class="delete">ğŸ—‘ï¸ Ø­Ø°Ù</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>
{% endfor %}

</body>
</html>
