<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬</title>
<style>
body { font-family: Arial; max-width: 900px; margin: auto; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: center; }
button { padding: 5px 10px; cursor: pointer; }
.delete { color: red; background: none; border: none; }
.flash { background: #e8ffe8; padding: 10px; margin-top: 10px; }
</style>

<script>
function askPassword(form) {
    const pass = prompt("ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø°Ù:");
    if (!pass) return false;
    form.password.value = pass;
    return true;
}
</script>
</head>

<body>

<h1>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬</h1>

{% with messages = get_flashed_messages() %}
{% if messages %}
  {% for msg in messages %}
    <div class="flash">{{ msg }}</div>
  {% endfor %}
{% endif %}
{% endwith %}

<form method="POST" enctype="multipart/form-data">
    <input type="file" name="file" accept=".exe" required>
    <button type="submit">â¬†ï¸ Ø±ÙØ¹ Ø¨Ø±Ù†Ø§Ù…Ø¬</button>
</form>

<table>
<tr>
    <th>Ø§Ø³Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</th>
    <th>ØªØ­Ù…ÙŠÙ„</th>
    <th>Ø­Ø°Ù</th>
</tr>

{% for file in files %}
<tr>
    <td>{{ file.split('_',1)[1] }}</td>
    <td>
        <a href="{{ url_for('download_file', filename=file) }}">ØªØ­Ù…ÙŠÙ„</a>
    </td>
    <td>
        <form method="POST"
              action="{{ url_for('delete_file', filename=file) }}"
              onsubmit="return askPassword(this);">
            <input type="hidden" name="password">
            <button class="delete">ğŸ—‘ï¸ Ø­Ø°Ù</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>

</body>
</html>
